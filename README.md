# HealthKit MCP\n\nTimothy's Apple HealthKit workout integration for Simtheory.ai.\n\n## Overview\n\nThis service receives workout data from iOS Shortcuts and serves it via MCP protocol.\nCaptures: **Functional Training, Golf, Yoga, Running, Rowing, Walking**, and other workout types.\n\n## Architecture\n\n```\niOS Shortcuts (HealthKit) --> POST /ingest/workouts --> HealthKit MCP --> Simtheory.ai\n```\n\n1. **iOS Shortcut** reads HealthKit workouts on your iPhone\n2. **Shortcut Automation** runs daily (or on-demand)\n3. **POSTs data** to this service on Railway\n4. **MCP endpoints** serve workout data to Simtheory.ai\n\n## Endpoints\n\n### Ingest (from iOS Shortcut)\n- `POST /ingest/workouts` - Receive workouts from iOS Shortcut\n- `POST /ingest/workouts/batch` - Alternative batch format\n\n### Data (query workouts)\n- `GET /data/workouts?days=7` - Get recent workouts\n- `GET /data/workouts/today` - Get today's workouts\n- `GET /data/workouts/date/{date}` - Get workouts for specific date\n- `GET /data/workouts/type/{type}` - Get workouts by type\n- `GET /data/workouts/summary?days=7` - Get workout summary\n\n### MCP Protocol (for Simtheory.ai)\n- `GET /mcp` - Service discovery\n- `GET /mcp/tools/get_workouts` - Get workouts tool\n- `GET /mcp/tools/get_todays_workouts` - Get today's workouts tool\n- `GET /mcp/tools/get_workout_summary` - Get summary tool\n\n## Deployment\n\n### Railway\n\n1. Connect this repo to Railway\n2. Set environment variables:\n   - `HEALTHKIT_API_KEY` - Optional API key for security\n   - `WORKOUT_STORAGE_PATH` - Optional, defaults to `/tmp/workouts.json`\n3. Deploy!\n\n## iOS Shortcut Setup\n\nSee `docs/ios_shortcut.md` for instructions on creating the iOS Shortcut.\n\n## Environment Variables\n\n| Variable | Description | Default |\n|----------|-------------|---------|\n| `PORT` | Server port | 8000 |\n| `HEALTHKIT_API_KEY` | Optional API key | (none) |\n| `WORKOUT_STORAGE_PATH` | File storage path | `/tmp/workouts.json` |\n\n## Supported Workout Types\n\n- Functional Training\n- Golf\n- Yoga\n- Running\n- Rowing\n- Walking\n- Cycling\n- Swimming\n- HIIT\n- Strength Training\n- (any other HealthKit workout type)\n